<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INSERT_CODE_HERE</title>
    <link rel="stylesheet"  href="styles.css"> <!-- NOT WORKING! These should be in a folder, not directly in the static folder -->
    <link rel="stylesheet" href="bulma.min.css"> <!--  -||-  -->
    <script src="navigation.js"></script> <!-- NOT WORKING! -->

    
    <style>
        .page{
            display: none;
        }

        .page.current-page{
            display: block;
        }
    </style>

    
    

    <script>

        // --- navigation.js ---

        const API_URL = "http://localhost:3000/api/"

        let ACCESS_TOKEN = ""

        document.addEventListener('DOMContentLoaded', function(){

            const navbarBurger = document.getElementById('navbarBurger')
            const navbarMenu = document.getElementById('navbarMenu')

            navbarBurger.addEventListener('click', function(){
                navbarBurger.classList.toggle('is-active')
                navbarMenu.classList.toggle('is-active')
            })

            const pageLinks = document.querySelectorAll('.page-link')

            for(const pageLink of pageLinks){
                pageLink.addEventListener('click', function(event){
                    event.preventDefault()

                    const url = pageLink.getAttribute('href')

                    history.pushState(null, "", url)

                    hideCurrentPage()
                    showPage(url)
                })                
            }

            showPage(location.pathname)

            
        })

        window.addEventListener('popstate', function(){
            hideCurrentPage()
            showPage(location.pathname)
        })

        function hideCurrentPage(){
            document.querySelector('.current-page').classList.remove('current-page')
        }

        function showPage(url){
            let nextPageId

            switch (url) {
                case '/':
                    nextPageId = 'home-page'
                    break

                case '/about':
                    nextPageId = 'about-page'
                    break

                case '/contact':
                    nextPageId = 'contact-page'
                    break

                case '/challenges':
                    nextPageId = 'challenges-page'
                    break

                case '/sign-up':
                    nextPageId = 'sign-up-page'
                    break

                case '/login':
                    nextPageId = 'login-page'
                    break
            
                default:
                    if(url.startsWith("/challenges/")){
                        const [empty, humans, id] = url.split("/")
                        nextPageId = 'challenge-page'
                        //loadChallengePage(id)
                    }
                    else{
                        nextPageId = 'not-found-page'
                    }
                    break
            }

            document.getElementById(nextPageId).classList.add('current-page')
        }

        // --- navigation.js END ---

        // --- challenges.js ---

        async function loadChallengesPage(){
            const response = await fetch(API_URL+challenges)

            const challenges = await response.json()
        }



    </script>




</head>
<body class="content">
    
    <header>
        <h1>INSERT_CODE_HERE</h1>
    </header>

    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">

            <a href="/" class="navbar-item page-link">
                INSERT_CODE_HERE
            </a>

            <a id="navbarBurger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div id="navbarMenu" class="navbar-menu">

            <div class="navbar-start">
                <a href="/" class="navbar-item page-link">Home</a>
                <a href="/challenges" class="navbar-item page-link">Challenges</a>

                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        More
                    </a>

                    <div class="navbar-dropdown">
                        <a href="/about" class="navbar-item page-link">About</a>
                        <a href="/contact" class="navbar-item page-link">Contact</a>
                    </div>
                </div>
            </div>

            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons">
                        <a href="/sign-up" class="button is-primary page-link">Sign up</a>
                        <a href="/login" class="button is-light page-link">Login</a>
                    </div>
                </div>
            </div>

        </div>

    </nav>

    <main>

        <section id="home-page" class="page">
            HOME PAGE
        </section>

        <section id="challenges-page" class="page">
            CHALLENGES PAGE
        </section>

        <section id="about-page" class="page">
            ABOUT PAGE
        </section>

        <section id="contact-page" class="page">
            CONTACT PAGE
        </section>

        <section id="sign-up-page" class="page">
            SIGN UP PAGE
        </section>

        <section id="login-page" class="page">
            LOGIN PAGE
        </section>

    </main>

    <footer>

    </footer>
    

</body>
</html>